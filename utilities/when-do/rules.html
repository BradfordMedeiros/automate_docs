
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>rules Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="sequencer.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Automate
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../automate/">
            
                <a href="../../automate/">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../automate/ui.html">
            
                <a href="../../automate/ui.html">
            
                    
                    User-Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../automate/communication.html">
            
                <a href="../../automate/communication.html">
            
                    
                    Communication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../automate/system/">
            
                <a href="../../automate/system/">
            
                    
                    automate-core
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../../automate/system/actions.html">
            
                <a href="../../automate/system/actions.html">
            
                    
                    Actions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../../automate/system/states.html">
            
                <a href="../../automate/system/states.html">
            
                    
                    States
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../../automate/system/conditions.html">
            
                <a href="../../automate/system/conditions.html">
            
                    
                    Conditions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../../automate/system/sequences.html">
            
                <a href="../../automate/system/sequences.html">
            
                    
                    Sequences
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../automate/events.html">
            
                <a href="../../automate/events.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Utilities
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="./">
            
                <a href="./">
            
                    
                    when-do
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1.1" data-path="rules.html">
            
                <a href="rules.html">
            
                    
                    rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="sequencer.html">
            
                <a href="sequencer.html">
            
                    
                    sequencer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../fs_mount_mqtt/">
            
                <a href="../fs_mount_mqtt/">
            
                    
                    fs_mount_mqtt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../mqtt_mongo/">
            
                <a href="../mqtt_mongo/">
            
                    
                    mqtt_mongo
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >rules</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="whendo----rules"><em>when_do --&gt; rules</em></h1>
<hr>
<h3 id="description">Description</h3>
<p><strong>Rules</strong> is a utility class to evaulate when certain conditions become true.</p>
<p>Upon calling do the actions will start to be evaluated.  Functions used as evaluators should be pure and lightweight.
The library works internally by calling these functions and evaluating them on a loop. This means it fits certain use
cases well, but is not meant as a replacement for a basic if statement since it is a continuous check.</p>
<p>General pattern is below:
When the evaluator returns true, the function will call function_to_perform.  The object_to_evaluate will then be passed as arguements into the function_to_perform.
Options may be specified that specify the frequency to call the evaluator, rate, action limit, rate limit.  See below for details</p>
<h3 id="general-usage">General Usage</h3>
<pre><code>const handle = rules.(evaluator).do(function_to_perform: function, options: object)
</code></pre><h5 id="evaluator-methods">Evaluator Methods</h5>
<pre><code>    when(object_to_evaluate: any, evaluator_function: function&lt;bool&gt;): function // will perform the action when the evaluator is true
    transition(evaluator_function1: function&lt;bool&gt;, evaluator_function2: function&lt;bool&gt;, action: function&lt;any&gt;): function /// will perform the action when the first evaluator is true, and then the second becomes true
    expectWithin(evaluator_function1: function&lt;bool&gt;, evaluator_function2: function&lt;bool&gt;, action: function&lt;any&gt;, resolve, reject): function // when the first condition becomes true, call the resolve callback if the func2 returns true, else call the back callback
</code></pre><h5 id="options-specification">Options Specification</h5>
<pre><code>options = {
    rate: ?Number,                // Rate to evaluate the loop in milliseconds. 
    eval_limit: ?Number =1000,    // Upper bound of the number of times to evaluate the loop.  Object will then be destroyed.
    action_limit: ?Number,        // Upper bound of the number of times to call the action (regardless of truthiness). Object will then be destoryed.
}
</code></pre><h5 id="handle">Handle</h5>
<pre><code>
const handle = {
    pause: function &lt;void&gt;, // pauses the rule from being evaluated, can be resumed
    resume: function&lt;void&gt;, // resumes a paused rule, can be paused
    stop: function&lt;void&gt;,   // stops a rule, cannot be resumed
    get_state: function&lt;string&gt; // returns state of handle, oneOf([&apos;active&apos;, &apos;paused&apos;, &apos;stopped&apos;])
}
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: when-do">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="sequencer.html" class="navigation navigation-next " aria-label="Next page: sequencer">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"rules","level":"1.3.1.1","depth":3,"next":{"title":"sequencer","level":"1.3.1.2","depth":3,"path":"utilities/when-do/sequencer.md","ref":"utilities/when-do/sequencer.md","articles":[]},"previous":{"title":"when-do","level":"1.3.1","depth":2,"path":"utilities/when-do/README.md","ref":"utilities/when-do/README.md","articles":[{"title":"rules","level":"1.3.1.1","depth":3,"path":"utilities/when-do/rules.md","ref":"utilities/when-do/rules.md","articles":[]},{"title":"sequencer","level":"1.3.1.2","depth":3,"path":"utilities/when-do/sequencer.md","ref":"utilities/when-do/sequencer.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":[],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"utilities/when-do/rules.md","mtime":"2017-04-03T03:45:26.547Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-04-03T07:06:50.676Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

